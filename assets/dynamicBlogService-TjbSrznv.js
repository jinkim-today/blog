class f{constructor(){this.cache=new Map,this.baseUrl="/blog"}async getAllBlogPosts(){const t="all-posts";if(this.cache.has(t))return this.cache.get(t);const e=[],o=["en","ko"];for(const s of o){const r=await this.getBlogPostsByLanguage(s);e.push(...r)}return this.cache.set(t,e),e}async getBlogPostsByLanguage(t){const e=`posts-${t}`;if(this.cache.has(e))return this.cache.get(e);const o=[];try{const s=await this.getAvailableCategories(t);for(const r of s){const n=await this.getPostsFromCategory(t,r);o.push(...n)}}catch(s){console.warn(`No posts found for language: ${t}`,s)}return this.cache.set(e,o),o}async getBlogPostsByCategory(t){return(await this.getAllBlogPosts()).filter(o=>o.category===t)}async getBlogPost(t,e,o){const s=await this.getBlogPostsByLanguage(e);let r=s.find(n=>n.slug===t);return o&&r&&(r=s.find(n=>n.slug===t&&n.category===o)),r}async getAllCategories(){const t=await this.getAllBlogPosts();return Array.from(new Set(t.map(o=>o.category))).sort()}async getAvailableCategories(t){const e=[],s=["frontend","backend","devops","engineering","fullstack","react","nodejs","javascript","typescript","python","database","security","performance","testing","deployment","category1","category2","category3","category4","category5","tutorial","guide","tips","news","opinion","review","architecture","design","ux","ui","mobile","web","aws","docker","kubernetes","microservices","api","graphql","rest","sql","nosql","redis","mongodb"].map(async a=>{try{if((await this.getPostsFromCategory(t,a)).length>0)return a}catch{}return null}),n=(await Promise.all(s)).filter(a=>a!==null);return e.push(...n),e.sort()}async getPostsFromCategory(t,e){const s=this.generatePotentialFilenames(e).map(async a=>{try{return await this.loadPostFromFile(t,e,a)}catch{return null}});return(await Promise.all(s)).filter(a=>a!==null)}generatePotentialFilenames(t){const e=[],o=[`${t}.md`,`${t}-guide.md`,`${t}-tutorial.md`],s=["index.md","introduction.md","overview.md","guide.md","performance-optimization.md","modern-css-techniques.md","react-patterns.md","best-practices.md"],r=["performance-optimization.md","modern-css-techniques.md"];return e.push(...o,...s,...r),Array.from(new Set(e))}async loadPostFromFile(t,e,o){try{const s=`${this.baseUrl}/${t}/${e}/${o}`,r=await fetch(s);if(!r.ok)return null;const a=(await r.text()).match(/^---\n([\s\S]*?)\n---\n([\s\S]*)$/);if(!a)return console.warn(`Invalid markdown format in ${s}`),null;const l=a[1],d=a[2],i={};l.split(`
`).forEach(g=>{const m=g.indexOf(":");if(m===-1)return;const h=g.substring(0,m).trim();let c=g.substring(m+1).trim();if(c.startsWith('"')&&c.endsWith('"')&&(c=c.slice(1,-1)),c.startsWith("[")&&c.endsWith("]")){const p=c.slice(1,-1).split(",").map(y=>y.trim().replace(/"/g,""));i[h]=p}else i[h]=c});const u=o.replace(".md","");return{id:this.generateId(u,t),slug:u,title:i.title||"Untitled",summary:i.summary||"",content:d,category:i.category||e,language:t,date:i.date||new Date().toISOString().split("T")[0],readTime:i.readTime||5,views:0,tags:i.tags||[],author:i.author||"Anonymous"}}catch(s){return console.error(`Error loading post ${t}/${e}/${o}:`,s),null}}generateId(t,e){const o=`${t}-${e}`;let s=0;for(let r=0;r<o.length;r++){const n=o.charCodeAt(r);s=(s<<5)-s+n,s=s&s}return Math.abs(s)}clearCache(){this.cache.clear()}async incrementViews(t){console.log(`Incrementing views for post ID: ${t}`)}}const b=new f;export{b as dynamicBlogService};
