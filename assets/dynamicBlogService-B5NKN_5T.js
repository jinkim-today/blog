class y{constructor(){this.cache=new Map,this.baseUrl="/blog"}async getAllBlogPosts(){const t="all-posts";if(this.cache.has(t))return this.cache.get(t);const e=[],r=["en","ko"];for(const s of r){const o=await this.getBlogPostsByLanguage(s);e.push(...o)}return this.cache.set(t,e),e}async getBlogPostsByLanguage(t){const e=`posts-${t}`;if(this.cache.has(e))return this.cache.get(e);const r=[];try{const s=await this.getAvailableCategories(t);for(const o of s){const n=await this.getPostsFromCategory(t,o);r.push(...n)}}catch(s){console.warn(`No posts found for language: ${t}`,s)}return this.cache.set(e,r),r}async getBlogPostsByCategory(t){return(await this.getAllBlogPosts()).filter(r=>r.category===t)}async getBlogPost(t,e,r){const s=await this.getBlogPostsByLanguage(e);let o=s.find(n=>n.slug===t);return r&&o&&(o=s.find(n=>n.slug===t&&n.category===r)),o}async getAllCategories(){const t=await this.getAllBlogPosts();return Array.from(new Set(t.map(r=>r.category))).sort()}async getAvailableCategories(t){const e=[],s=["frontend","backend","devops","engineering","fullstack","react","nodejs","javascript","typescript","python","database","security","performance","testing","deployment","category1","category2","category3","category4","category5","tutorial","guide","tips","news","opinion","review","architecture","design","ux","ui","mobile","web","aws","docker","kubernetes","microservices","api","graphql","rest","sql","nosql","redis","mongodb"].map(async i=>{try{if((await this.getPostsFromCategory(t,i)).length>0)return i}catch{}return null}),n=(await Promise.all(s)).filter(i=>i!==null);return e.push(...n),e.sort()}async getPostsFromCategory(t,e){const s=this.generatePotentialFilenames(e).map(async i=>{try{return await this.loadPostFromFile(t,e,i)}catch{return null}});return(await Promise.all(s)).filter(i=>i!==null)}generatePotentialFilenames(t){const e=[],r={frontend:["modern-css-techniques.md","react-patterns.md","vue-composition-api.md","responsive-design.md","web-components.md","frontend-architecture.md","css-grid-flexbox.md","javascript-frameworks.md","ui-ux-design.md","performance-optimization.md"],backend:["performance-optimization.md","api-design.md","database-optimization.md","microservices.md","node-security.md","server-architecture.md","rest-api-best-practices.md","graphql-guide.md","caching-strategies.md"],devops:["kubernetes-guide.md","docker-best-practices.md","ci-cd-pipeline.md","aws-deployment.md","monitoring-logging.md","infrastructure-as-code.md","terraform-guide.md","jenkins-pipeline.md","containerization.md"],security:["web-security-best-practices.md","authentication-authorization.md","owasp-top10.md","secure-coding.md","penetration-testing.md","security-audit.md"],database:["sql-optimization.md","nosql-vs-sql.md","database-design.md","mongodb-guide.md","postgresql-tips.md","redis-caching.md"],testing:["testing-strategies.md","unit-testing.md","integration-testing.md","e2e-testing.md","test-driven-development.md","jest-testing.md"]};r[t]&&e.push(...r[t]);const s=[`${t}.md`,`${t}-guide.md`,`${t}-tutorial.md`,`${t}-best-practices.md`,`${t}-tips.md`,`${t}-introduction.md`,`${t}-overview.md`,"index.md","introduction.md","getting-started.md","overview.md","guide.md","tutorial.md","best-practices.md","tips-tricks.md","advanced.md","intermediate.md","beginner.md","2024-guide.md","2024-trends.md","2024-update.md","latest-trends.md","new-features.md","whats-new.md","01-introduction.md","02-basics.md","03-advanced.md","part-1.md","part-2.md","part-3.md","chapter-1.md","chapter-2.md","chapter-3.md","performance.md","optimization.md","architecture.md","patterns.md","design-patterns.md","best-practices.md","troubleshooting.md","debugging.md","monitoring.md"];return e.push(...s),Array.from(new Set(e))}async loadPostFromFile(t,e,r){try{const s=`${this.baseUrl}/${t}/${e}/${r}`,o=await fetch(s);if(!o.ok)return null;const i=(await o.text()).match(/^---\n([\s\S]*?)\n---\n([\s\S]*)$/);if(!i)return console.warn(`Invalid markdown format in ${s}`),null;const d=i[1],p=i[2],a={};d.split(`
`).forEach(m=>{const l=m.indexOf(":");if(l===-1)return;const u=m.substring(0,l).trim();let c=m.substring(l+1).trim();if(c.startsWith('"')&&c.endsWith('"')&&(c=c.slice(1,-1)),c.startsWith("[")&&c.endsWith("]")){const h=c.slice(1,-1).split(",").map(f=>f.trim().replace(/"/g,""));a[u]=h}else a[u]=c});const g=r.replace(".md","");return{id:this.generateId(g,t),slug:g,title:a.title||"Untitled",summary:a.summary||"",content:p,category:a.category||e,language:t,date:a.date||new Date().toISOString().split("T")[0],readTime:a.readTime||5,views:0,tags:a.tags||[],author:a.author||"Anonymous"}}catch(s){return console.error(`Error loading post ${t}/${e}/${r}:`,s),null}}generateId(t,e){const r=`${t}-${e}`;let s=0;for(let o=0;o<r.length;o++){const n=r.charCodeAt(o);s=(s<<5)-s+n,s=s&s}return Math.abs(s)}clearCache(){this.cache.clear()}async incrementViews(t){console.log(`Incrementing views for post ID: ${t}`)}}const v=new y;export{v as dynamicBlogService};
